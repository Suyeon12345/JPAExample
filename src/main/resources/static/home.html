<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JpaTest</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>
        const test = () => {
            const formData = {
                text: $('#text1').val() // 입력 필드에서 값을 가져옵니다.
            };
            console.log("ddddddd"+formData.text);

            return new Promise((resolve, reject) => {
                $.ajax({
                    type: "POST",
                    url: "http://localhost:8000/api/jpatest/submit",
                    contentType: "application/json; charset=utf-8",
                    data: JSON.stringify(formData), // 객체를 JSON 문자열로 변환하여 전송합니다.
                    success: (response) => {
                        console.log('성공: ', response);
                        resolve(response);
                    },
                    error: (xhr, status, error) => {
                        console.log('오류: ', error);
                        reject(error);
                    }
                });
            });
        };

        $(document).ready(() => {
            // 폼 제출 이벤트를 가로챕니다.
            $('form').submit((event) => {
                event.preventDefault(); // 기본 폼 제출 동작을 막습니다.
                test().then((response) => {
                    console.log('성공: ', response);
                    // 성공 시 처리할 내용을 여기에 추가합니다.
                }).catch((error) => {
                    console.error('오류: ', error);
                    // 오류 시 처리할 내용을 여기에 추가합니다.
                });
            });
        });
    </script>
</head>
<body>
<h1>JPA 데이터 입력</h1>
<form>
    <label for="text1">텍스트:</label>
    <input type="text" id="text1" name="text1" required>
    <button type="submit">제출</button>
</form>
</body>
</html>